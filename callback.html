<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    // ✅ ใส่ LIFF ID ของ Channel นี้ (ดูได้ใน LINE Developers → LIFF → App → LIFF ID)
    const liffId = "YOUR_LIFF_ID";

    // ✅ URL ของ Google Form สมัครเรียน (พร้อม entry.1027717937)
    const formUrl = "https://docs.google.com/forms/d/e/1FAIpQLScBMG5Hv4lcdCzgjAYWxJV4VksW43aE8bVEh25R43kb5QcdPQ/viewform?usp=pp_url&entry.1027717937=";

    async function main() {
      try {
        await liff.init({ liffId });

        if (!liff.isLoggedIn()) {
          liff.login();
          return;
        }

        const profile = await liff.getProfile();
        const userId = profile.userId;

        // ✅ เมื่อได้ userId แล้ว redirect ไป Google Form
        window.location.href = formUrl + userId;

      } catch (err) {
        document.body.innerHTML = "<h3>เกิดข้อผิดพลาด: " + err.message + "</h3>";
        console.error(err);
      }
    }

    main();
  </script>
</head>
<body>
  <h3>กำลังเข้าสู่ระบบด้วย LINE... กรุณารอสักครู่</h3>
</body>
</html>
